<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client Workspace - Bridely.ai Vendor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: sans-serif;
            background-color: #FFFBEB; /* Amber Background */
        }
        /* Custom Colors */
        .bg-olive { background-color: #365314; }
        .text-olive { color: #365314; }
        .text-gold { color: #B45309; }
        .border-gold { border-color: #B45309; }
        .text-brown { color: #78350F; }
        .bg-golden-brown { background-color: #92400E; }
        .hover\:bg-golden-brown-dark:hover { background-color: #78350F; }
        
        /* Simple transition for tab content */
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .task-input:checked + .task-label {
            text-decoration: line-through;
            color: #6b7280;
        }
        #floorplan-canvas {
            cursor: default;
            background-color: #F9FAFB; /* gray-50 */
        }
        .floorplan-tool-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 80px;
            height: 80px;
            text-align: center;
        }
        .floorplan-tool-btn.active {
            background-color: #FEF3C7; /* amber-100 */
            border-color: #F59E0B; /* amber-500 */
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .spinner {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Navigation -->
    <nav class="bg-olive shadow-md fixed top-0 w-full z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                 <div class="flex-shrink-0">
                    <a href="landing-page.html" class="text-2xl font-bold text-white">bridely.ai <span class="text-sm font-medium text-amber-300">for Vendors</span></a>
                </div>
                <div class="hidden sm:ml-6 sm:flex sm:space-x-8">
                    <a href="#" class="text-gray-300 hover:text-white text-sm font-medium">Dashboard</a>
                    <a href="#" class="text-amber-300 border-amber-300 border-b-2 text-sm font-medium">Bookings</a>
                    <a href="#" class="text-gray-300 hover:text-white text-sm font-medium">Calendar</a>
                    <a href="#" class="text-gray-300 hover:text-white text-sm font-medium">Profile</a>
                    <a href="#" class="text-gray-300 hover:text-white text-sm font-medium">Analytics</a>
                </div>
                <div class="hidden sm:ml-6 sm:flex sm:items-center">
                    <span class="text-sm text-gray-300">Aloha Photography</span>
                    <a href="landing-page.html" class="ml-4 text-sm font-medium text-gray-400 hover:text-white">Log out</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-24 pb-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Header -->
            <header class="mb-8">
                <div>
                    <a href="#" class="text-sm font-medium text-gray-600 hover:text-gray-800">&larr; Back to all Bookings</a>
                    <h1 class="text-4xl font-bold text-olive mt-2">Jane & John's Wedding</h1>
                    <p class="text-lg text-brown">October 26, 2026 | The Grand Ballroom</p>
                </div>
            </header>

            <!-- Tab Navigation -->
            <div class="border-b border-gray-300">
                <nav id="tab-nav" class="-mb-px flex space-x-8 overflow-x-auto" aria-label="Tabs">
                    <a href="#overview" class="tab-link shrink-0 py-4 px-1 border-b-2 font-medium text-sm text-gold border-gold">Overview</a>
                    <a href="budget-tracker.html" class="tab-link shrink-0 py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-400 border-transparent">Checklist</a>
                    <a href="#activity" class="tab-link shrink-0 py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-400 border-transparent">Activity & Messages</a>
                    <a href="#moodboard" class="tab-link shrink-0 py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-400 border-transparent">Mood Board</a>
                    <a href="#floorplan" class="tab-link shrink-0 py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-400 border-transparent">Floorplan</a>
                    <a href="#seating" class="tab-link shrink-0 py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-400 border-transparent">Seating Chart</a>
                    <a href="#documents" class="tab-link shrink-0 py-4 px-1 border-b-2 font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-400 border-transparent">Documents</a>
                </nav>
            </div>

            <!-- Tab Content -->
            <div class="mt-8">
                <!-- Placeholder Tabs -->
                <div id="overview" class="tab-content active"><div class="bg-white p-6 rounded-lg shadow-lg"><p>Overview content...</p></div></div>
                <div id="checklist" class="tab-content"><div class="bg-white p-6 rounded-lg shadow-lg"><p>Checklist content...</p></div></div>
                <div id="activity" class="tab-content"><div class="bg-white p-6 rounded-lg shadow-lg"><p>Activity & Messages content...</p></div></div>
                <div id="moodboard" class="tab-content"><div class="bg-white p-6 rounded-lg shadow-lg"><p>Mood Board content...</p></div></div>
                <div id="documents" class="tab-content"><div class="bg-white p-6 rounded-lg shadow-lg"><p>Documents content...</p></div></div>
                
                <!-- Floorplan Content -->
                <div id="floorplan" class="tab-content">
                    <div class="bg-white p-8 rounded-lg shadow-lg">
                         <h3 class="text-xl font-semibold text-gray-800 mb-4">Floorplan Designer</h3>
                         <div id="floorplan-toolbar" class="flex items-center flex-wrap gap-2 p-4 bg-gray-100 rounded-lg mb-4"></div>
                         <div class="relative w-full h-[600px] bg-gray-50 border rounded-lg overflow-hidden">
                             <canvas id="floorplan-canvas"></canvas>
                         </div>
                    </div>
                </div>

                <!-- Seating Chart Content -->
                <div id="seating" class="tab-content">
                   <div class="bg-white p-8 rounded-lg shadow-lg">
                        <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                             <h3 class="text-xl font-semibold text-gray-800">AI Seating Chart Assistant</h3>
                             <p class="text-sm text-gray-500 mt-1">Assign guests to tables effortlessly.</p>
                        </div>
                         <div class="mt-6 grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <!-- Left: Rules & Actions -->
                            <div class="lg:col-span-1 space-y-6">
                                <div class="p-4 border rounded-lg">
                                    <h4 class="font-semibold text-gray-800 mb-2">1. Define Rules</h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded text-amber-600 focus:ring-amber-500"><span class="ml-2">Keep Smith family together</span></div>
                                        <div class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded text-amber-600 focus:ring-amber-500"><span class="ml-2">Seat John & Jane's college friends at the same table</span></div>
                                        <div class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded text-amber-600 focus:ring-amber-500"><span class="ml-2">Don't seat Aunt Carol near Uncle Bob</span></div>
                                    </div>
                                    <button class="mt-2 text-xs text-gold hover:underline">+ Add Rule</button>
                                </div>
                                <div class="p-4 border rounded-lg">
                                    <h4 class="font-semibold text-gray-800 mb-2">2. Assign Guests</h4>
                                    <p class="text-sm text-gray-500 mb-4">We'll use your confirmed guest list and number of tables.</p>
                                    <div class="flex items-center mb-2">
                                        <label for="table-count" class="mr-2 text-sm">Number of Tables:</label>
                                        <input id="table-count" type="number" value="12" class="w-20 border-gray-300 rounded-md shadow-sm sm:text-sm">
                                    </div>
                                    <button id="generate-seating-btn" class="w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-golden-brown rounded-md hover:bg-golden-brown-dark shadow-lg">
                                        <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M9.405 1.05c.412-1.363 2.176-1.363 2.588 0l.055.183c.13.43.485.785.915.915l.183.055c1.363.412 1.363 2.176 0 2.588l-.183.055a1.26 1.26 0 01-.915.915l-.055.183c-.412 1.363-2.176 1.363-2.588 0l-.055-.183a1.26 1.26 0 01-.915-.915l-.183-.055c-1.363-.412-1.363-2.176 0-2.588l.183-.055a1.26 1.26 0 01.915-.915l.055-.183zM10 3.25a.75.75 0 01.75.75v.01a.75.75 0 01-1.5 0V4A.75.75 0 0110 3.25zM10 8.5a.75.75 0 01.75.75v.01a.75.75 0 01-1.5 0V9.25A.75.75 0 0110 8.5zM7.25 10a.75.75 0 000 1.5h.01a.75.75 0 000-1.5H7.25zM12.75 10a.75.75 0 000 1.5h.01a.75.75 0 000-1.5H12.75z"/></svg>
                                        Generate Seating Chart
                                    </button>
                                </div>
                            </div>

                            <!-- Right: Seating Chart View -->
                            <div class="lg:col-span-2">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="seating-assignments">
                                    <!-- Table cards will be generated here -->
                                </div>
                            </div>
                        </div>
                   </div>
                </div>
            </div>
        </div>
    </main>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const tabs = document.querySelectorAll('.tab-link');
        const contents = document.querySelectorAll('.tab-content');
        
        const initializeFloorplanDesigner = async () => {
            const canvas = document.getElementById('floorplan-canvas');
            if (!canvas || canvas.dataset.initialized) return;
            canvas.dataset.initialized = 'true';

            const ctx = canvas.getContext('2d');
            const parent = canvas.parentElement;
            
            let objects = [];
            let currentTool = 'select';
            
            const svgAssets = {
                'round-table': { label: 'Round Table', svg: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="#E5E7EB" stroke="#9CA3AF" stroke-width="2"/></svg>`, width: 80, height: 80 },
                'rect-table': { label: 'Rect Table', svg: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 140 80"><rect width="140" height="80" fill="#E5E7EB" stroke="#9CA3AF" stroke-width="2" rx="5"/></svg>`, width: 140, height: 80 },
                // ... all other assets from previous step
            };

            const imageCache = {};
            const preloadImages = () => {
                 return new Promise((resolve) => {
                    const total = Object.keys(svgAssets).length;
                    if (total === 0) resolve();
                    let loaded = 0;
                    for (const key in svgAssets) {
                        const img = new Image();
                        img.onload = () => {
                            loaded++;
                            if (loaded === total) resolve();
                        };
                        img.src = `data:image/svg+xml;base64,${btoa(svgAssets[key].svg)}`;
                        imageCache[key] = img;
                    }
                });
            };

            const createToolbar = () => {
                const toolbar = document.getElementById('floorplan-toolbar');
                if(!toolbar || toolbar.dataset.initialized) return;
                const fragment = document.createDocumentFragment();
                for (const key in svgAssets) {
                    const btn = document.createElement('button');
                    btn.dataset.type = key;
                    btn.className = 'floorplan-tool-btn p-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50';
                    btn.innerHTML = `<img src="${imageCache[key].src}" class="w-8 h-8 pointer-events-none" alt="${key}"><span class="text-xs mt-1 pointer-events-none">${svgAssets[key].label}</span>`;
                    fragment.appendChild(btn);
                }
                toolbar.prepend(fragment);
                toolbar.dataset.initialized = 'true';
            };

            const draw = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                objects.forEach(obj => {
                    const img = imageCache[obj.type];
                    if (img) ctx.drawImage(img, obj.x, obj.y, obj.width, obj.height);
                });
            };
            
            const addObject = (type, x = 50, y = 50) => {
                const asset = svgAssets[type];
                if (asset) {
                    objects.push({type, x: x - asset.width/2, y: y - asset.height/2, width: asset.width, height: asset.height});
                    draw();
                }
            };

            const activateTool = (toolType) => {
                currentTool = toolType;
                document.querySelectorAll('.floorplan-tool-btn').forEach(b => b.classList.remove('active'));
                const activeBtn = document.querySelector(`.floorplan-tool-btn[data-type="${toolType}"]`);
                if(activeBtn) activeBtn.classList.add('active');
                canvas.style.cursor = svgAssets[toolType] ? 'crosshair' : 'default';
            };

            document.getElementById('floorplan-toolbar').addEventListener('click', (e) => {
                const btn = e.target.closest('.floorplan-tool-btn');
                if (!btn) return;
                activateTool(btn.dataset.type);
            });
            
            canvas.onmousedown = (e) => {
                 if (svgAssets[currentTool]) {
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    addObject(currentTool, x, y);
                    activateTool('select');
                 }
            };
            
            await preloadImages();
            createToolbar();
            
            const resizeCanvas = () => {
                canvas.width = parent.clientWidth;
                canvas.height = parent.clientHeight;
                draw();
            };
            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();
        };
        
        const initializeSeatingChart = () => { /* ... seating chart code ... */ };

        tabs.forEach(tab => {
            tab.addEventListener('click', async (e) => {
                e.preventDefault();
                tabs.forEach(t => {
                    t.classList.remove('text-gold', 'border-gold');
                    t.classList.add('text-gray-500', 'hover:text-gray-700', 'hover:border-gray-400', 'border-transparent');
                });
                contents.forEach(c => c.classList.remove('active'));
                
                tab.classList.add('text-gold', 'border-gold');
                const contentId = tab.getAttribute('href').substring(1);
                document.getElementById(contentId).classList.add('active');

                if (contentId === 'floorplan' && !document.getElementById('floorplan-canvas')?.dataset.initialized) {
                    await initializeFloorplanDesigner();
                } else if (contentId === 'seating') {
                     initializeSeatingChart();
                }
            });
        });

        document.querySelector('#overview').classList.add('active');
    });
    </script>
</body>
</html>
